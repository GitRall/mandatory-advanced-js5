(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,a,t){e.exports={"overlay-move":"MoveFile_overlay-move__3BZRm","overlay-move__move-container":"MoveFile_overlay-move__move-container__PUUce","move-container__close-btn":"MoveFile_move-container__close-btn__uNiWv","move-container__title-wrapper":"MoveFile_move-container__title-wrapper__JNrEl","move-container__icon":"MoveFile_move-container__icon__2i5pu","move-container__title":"MoveFile_move-container__title__2Ymcg","move-container__path-wrapper":"MoveFile_move-container__path-wrapper__IDR3V","path-wrapper__path-label":"MoveFile_path-wrapper__path-label__WR1P0","path-wrapper__path-text":"MoveFile_path-wrapper__path-text__23xDi","move-form__folder-container":"MoveFile_move-form__folder-container__2_RQj","move-form__folder-wrapper":"MoveFile_move-form__folder-wrapper__2-Knf","move-form__folder-radio":"MoveFile_move-form__folder-radio__26LHH","move-form__folder-checkmark":"MoveFile_move-form__folder-checkmark__2jXSH","move-form__folder-icon":"MoveFile_move-form__folder-icon__2kSxp","move-form__btns-wrapper":"MoveFile_move-form__btns-wrapper__2HMxk","move-form__cancel-btn":"MoveFile_move-form__cancel-btn__3_Ikp","move-form__submit-btn":"MoveFile_move-form__submit-btn__3gY-a"}},11:function(e,a,t){e.exports={"overlay-rename":"RenameFile_overlay-rename__3zlb5","rename-container":"RenameFile_rename-container__2iRUD","rename-container__title-wrapper":"RenameFile_rename-container__title-wrapper__2uxso","title-wrapper__icon":"RenameFile_title-wrapper__icon__27DwX","title-wrapper__title":"RenameFile_title-wrapper__title__3jovG","rename-container__rename-form":"RenameFile_rename-container__rename-form__2dfhA","rename-form__input":"RenameFile_rename-form__input__2GRIO","rename-form__btns-wrapper":"RenameFile_rename-form__btns-wrapper__2Rp4M","rename-form__cancel-btn":"RenameFile_rename-form__cancel-btn__35AsP","rename-form__submit-btn":"RenameFile_rename-form__submit-btn__3F5aK","rename-container__close-btn":"RenameFile_rename-container__close-btn__39SuT"}},15:function(e,a,t){e.exports={nav:"Navigation_nav__2k9ER",nav__head:"Navigation_nav__head__3YF9U","nav__logo-user-wrapper":"Navigation_nav__logo-user-wrapper__uANOn",nav__logo:"Navigation_nav__logo__1tQb-","nav__user-wrapper":"Navigation_nav__user-wrapper__1LY99",nav__username:"Navigation_nav__username__1fcbH",nav__email:"Navigation_nav__email__1jzdf","nav__logout-btn":"Navigation_nav__logout-btn__3xlt1","nav__btns-container":"Navigation_nav__btns-container__3eDfW",nav__line:"Navigation_nav__line__35Y2Q",nav__ul:"Navigation_nav__ul__1qgMY"}},16:function(e,a,t){e.exports={"overlay-rename":"DeleteFile_overlay-rename__1NS_Y","delete-container":"DeleteFile_delete-container__1V77b","delete-container__btns-wrapper":"DeleteFile_delete-container__btns-wrapper__2v9vH","delete-container__submit-btn":"DeleteFile_delete-container__submit-btn__32JX4","delete-container__cancel-btn":"DeleteFile_delete-container__cancel-btn__3gqeG","delete-container__title-wrapper":"DeleteFile_delete-container__title-wrapper__deSTR","title-wrapper__icon":"DeleteFile_title-wrapper__icon__2wEZT","title-wrapper__title":"DeleteFile_title-wrapper__title__RLV0Y","title-wrapper__name":"DeleteFile_title-wrapper__name__hprRa","delete-container__close-btn":"DeleteFile_delete-container__close-btn__3sxl1"}},18:function(e,a,t){e.exports={"login-container":"Login_login-container__3KTh9","login-container__content-wrapper":"Login_login-container__content-wrapper__1iUcd","login-container__logo-wrapper":"Login_login-container__logo-wrapper__1ZNnK","logo-wrapper__logo":"Login_logo-wrapper__logo__nF0Z3","logo-wrapper__logo-text":"Login_logo-wrapper__logo-text__35juL","login-container__line":"Login_login-container__line__YC0dI","login-container__connect-btn":"Login_login-container__connect-btn__gcg4_"}},2:function(e,a,t){e.exports={content:"Content_content__1pIrs",content__table:"Content_content__table__3cTbz","content__table-row":"Content_content__table-row__1SMON","content__table-dropdown":"Content_content__table-dropdown__1ttJ-","content__table-th":"Content_content__table-th__3GNkN","content__table-td":"Content_content__table-td__18sIP",content__link:"Content_content__link__3LXDc","content__table-icon":"Content_content__table-icon__1bKpM",content__star:"Content_content__star__346b8","content__star--active":"Content_content__star--active__FywwN","content__fav-table-td":"Content_content__fav-table-td__9lrem"}},21:function(e,a,t){e.exports=t.p+"static/media/lockbox_logo.ed84172e.svg"},23:function(e,a,t){e.exports={home:"Home_home__2FicO","home__left-container":"Home_home__left-container__23-g9","home__right-container":"Home_home__right-container__2V5q5"}},26:function(e,a,t){e.exports={"content__table-icon":"FileType_content__table-icon__1tPMt"}},46:function(e,a,t){e.exports=t(81)},5:function(e,a,t){e.exports={dropdown:"Dropdown_dropdown__1kesn",dropdown__list:"Dropdown_dropdown__list__26mPD","dropdown__list-item":"Dropdown_dropdown__list-item__1aaaf","dropdown__list-icon":"Dropdown_dropdown__list-icon__aSxJq","dropdown__list-label":"Dropdown_dropdown__list-label__262vs"}},51:function(e,a,t){},6:function(e,a,t){e.exports={header:"Header_header__32prN",header__container:"Header_header__container__3aVRG",header__link:"Header_header__link__kfbtq","header__link-arrow":"Header_header__link-arrow__28E7j",header__row:"Header_header__row__4Jzu4",shake:"Header_shake__2ZZ58",header__search:"Header_header__search__kuHMz","header__search-form":"Header_header__search-form__1R_HS","header__search-input":"Header_header__search-input__1bnXd","header__search-icon":"Header_header__search-icon__84AdW","header__search-container":"Header_header__search-container__2ns1c","header__search-ul":"Header_header__search-ul__2yyiH","header__search-list":"Header_header__search-list__1HYnD","header__search-div":"Header_header__search-div__BW6f_","header__search-text":"Header_header__search-text__3NYXZ","header__search-hide":"Header_header__search-hide__3C63g"}},8:function(e,a,t){e.exports={"overlay-uploadfile":"UploadFile_overlay-uploadfile__3SkyK","overlay-uploadfile__container":"UploadFile_overlay-uploadfile__container__1KgqQ","overlay-uploadfile__header-wrapper":"UploadFile_overlay-uploadfile__header-wrapper__3oebN","overlay-uploadfile__header-icon":"UploadFile_overlay-uploadfile__header-icon__2wOhL","overlay-uploadfile__header-text":"UploadFile_overlay-uploadfile__header-text__1mJDk","overlay-uploadfile__form":"UploadFile_overlay-uploadfile__form__2ebKq","overlay-uploadfile__input-wrapper":"UploadFile_overlay-uploadfile__input-wrapper__3M1Iw","overlay-uploadfile__upload-input":"UploadFile_overlay-uploadfile__upload-input__qseWy","overlay-uploadfile__fake-input":"UploadFile_overlay-uploadfile__fake-input__35jb4","overlay-uploadfile__fake-input-icon":"UploadFile_overlay-uploadfile__fake-input-icon__3Zmo8","overlay-uploadfile__filename":"UploadFile_overlay-uploadfile__filename__OoNnI","overlay-uploadfile__btn-wrapper":"UploadFile_overlay-uploadfile__btn-wrapper__1-4Cr","overlay-uploadfile__cancel-btn":"UploadFile_overlay-uploadfile__cancel-btn__1c7JI","overlay-uploadfile__submit-btn":"UploadFile_overlay-uploadfile__submit-btn__1zvT_","overlay-uploadfile__close-btn":"UploadFile_overlay-uploadfile__close-btn__zsbB3"}},81:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),l=t(38),r=t.n(l),c=(t(51),t(17)),i=t(19),_=t(21),s=t.n(_),m=t(18),p=t.n(m),d=function(e){return o.a.createElement("div",{className:p.a["login-container"]},o.a.createElement("div",{className:p.a["login-container__content-wrapper"]},o.a.createElement("div",{className:p.a["login-container__logo-wrapper"]},o.a.createElement("img",{className:p.a["logo-wrapper__logo"],src:s.a,alt:"Lockbox logotype"}),o.a.createElement("h1",{className:p.a["logo-wrapper__logo-text"]},"LOCKBOX")),o.a.createElement("span",{className:p.a["login-container__line"]}),o.a.createElement("a",{className:p.a["login-container__connect-btn"],href:"https://www.dropbox.com/oauth2/authorize?client_id=h7s722dkxc8lgct&response_type=code&redirect_uri=https://ultraemme.github.io/mandatory-advanced-js5"},"CONNECT")))},f=t(45),u=t(3),v=t(39),h=t.n(v),b=t(4),g=new(t(83).a)(window.localStorage.getItem("token"));function E(e){e?window.localStorage.setItem("token",e):window.localStorage.removeItem("token"),g.next(e)}var N=t(40),w=t(6),F=t.n(w),y=t(26),k=t.n(y),D=/\.(gif|jpg|jpeg|tiff|tif|png|bmp)$/i,x=function(e){var a=Object(n.useState)(""),t=Object(u.a)(a,2),l=t[0],r=t[1];return Object(n.useEffect)(function(){D.test(e.file.name)&&new b.Dropbox({accessToken:g.value,fetch:fetch}).filesGetThumbnail({path:e.file.path_lower,size:"w32h32"}).then(function(e){var a=URL.createObjectURL(e.fileBlob);r(a)})},[e.file.name,e.file.path_lower]),"folder"===e.file[".tag"]?o.a.createElement("i",{className:"material-icons ".concat(k.a["content__table-icon"])},"folder"):D.test(e.file.name)?o.a.createElement("img",{src:l,alt:e.file.name}):o.a.createElement("i",{className:"material-icons ".concat(k.a["content__table-icon"])},"insert_drive_file")},O=t(41),j=t.n(O),C=function(e){var a=e.currentPath.pathname.substr(1).split("/"),t=Object(n.useState)(!1),l=Object(u.a)(t,2),r=l[0],i=l[1],_="",s=e.searchlist;return o.a.createElement("header",{className:F.a.header},o.a.createElement("div",{className:F.a.header__container},a.map(function(e){return _+="/".concat(e),o.a.createElement("div",{key:e,className:F.a.header__row},o.a.createElement(c.b,{className:F.a.header__link,to:_},e.charAt(0).toUpperCase()+e.slice(1)),o.a.createElement("span",{className:F.a["header__link-arrow"]}," > "))})),o.a.createElement("div",{className:F.a.header__search},o.a.createElement("form",{className:F.a["header__search-form"]},o.a.createElement("label",{htmlFor:"search"},o.a.createElement("i",{className:"material-icons ".concat(F.a["header__search-icon"])},"search")),o.a.createElement("input",{onChange:e.searchFile,autoComplete:"off",value:e.value||"",className:F.a["header__search-input"],onFocus:function(){i(!0)},onBlur:function(){setTimeout(function(){return i(!1)},100)},type:"text",name:"search",placeholder:"Search..."})),o.a.createElement("div",{className:j()(F.a["header__search-container"],Object(N.a)({},F.a["header__search-hide"],!r||""===e.value))},o.a.createElement("ul",{className:F.a["header__search-ul"]},s.length?s.map(function(a){return o.a.createElement("li",{key:a.id,onClick:function(){!function(a){if("folder"===a[".tag"])e.history.push("/home".concat(a.path_display));else{var t=a.path_display.split("/"+a.name)[0];e.history.push("/home".concat(t))}}(a),e.searchFile("")},className:F.a["header__search-list"]},o.a.createElement("div",{className:F.a["header__search-div"]},o.a.createElement(x,{file:a}),o.a.createElement("span",{className:F.a["header__search-text"]},a.name)))}):o.a.createElement("li",{className:F.a["header__search-list"]},o.a.createElement("div",{className:F.a["header__search-div"]},o.a.createElement("span",{className:F.a["header__search-text"]},"No matches...")))))))},S=t(2),R=t.n(S),H=t(22),M=t.n(H),T=t(5),L=t.n(T),U=function(e){function a(a){e.toggleDropdown(),e.addFavorite(e.file)}function t(a){e.toggleDropdown(),e.removeFavorite(e.file)}return o.a.createElement("div",{onMouseLeave:e.toggleDropdown,className:L.a.dropdown,style:{top:e.posY,left:e.posX}},o.a.createElement("ul",{className:L.a.dropdown__list},function(){var n=!0,l=!1,r=void 0;try{for(var c,i=e.favorites[Symbol.iterator]();!(n=(c=i.next()).done);n=!0)if(c.value.id===e.file.id)return o.a.createElement("li",{key:"star",onClick:t,className:L.a["dropdown__list-item"]},o.a.createElement("span",{className:"".concat(L.a["dropdown__list-icon"]," material-icons")},"star"),o.a.createElement("span",{className:L.a["dropdown__list-label"]},"Remove from favorites"))}catch(_){l=!0,r=_}finally{try{n||null==i.return||i.return()}finally{if(l)throw r}}return o.a.createElement("li",{key:"star",onClick:a,className:L.a["dropdown__list-item"]},o.a.createElement("span",{className:"".concat(L.a["dropdown__list-icon"]," material-icons")},"star"),o.a.createElement("span",{className:L.a["dropdown__list-label"]},"Add to favorites"))}(),o.a.createElement("li",{key:"download",onClick:function(a){e.toggleDropdown(),e.downloadFile(e.file)},className:L.a["dropdown__list-item"]},o.a.createElement("span",{className:"".concat(L.a["dropdown__list-icon"]," material-icons")},"arrow_downward"),o.a.createElement("span",{className:L.a["dropdown__list-label"]},"Download")),o.a.createElement("li",{key:"rename",className:L.a["dropdown__list-item"],onClick:function(a){e.toggleDropdown(),e.renameFileFunc(e.file)}},o.a.createElement("span",{className:"".concat(L.a["dropdown__list-icon"]," material-icons")},"create"),o.a.createElement("span",{className:L.a["dropdown__list-label"]},"Rename")),o.a.createElement("li",{key:"copy",className:L.a["dropdown__list-item"],onClick:function(a){e.toggleDropdown(),e.copyFile(e.file)}},">",o.a.createElement("span",{className:"".concat(L.a["dropdown__list-icon"]," material-icons")},"file_copy"),o.a.createElement("span",{className:L.a["dropdown__list-label"]},"Copy")),o.a.createElement("li",{key:"move",className:L.a["dropdown__list-item"],onClick:function(a){e.toggleDropdown(),e.moveFileFunc(e.file)}},o.a.createElement("span",{className:"".concat(L.a["dropdown__list-icon"]," material-icons")},"exit_to_app"),o.a.createElement("span",{className:L.a["dropdown__list-label"]},"Move")),o.a.createElement("li",{key:"delete",onClick:function(a){e.toggleDropdown(),e.deleteFile(e.file)},className:L.a["dropdown__list-item"]},o.a.createElement("span",{className:"".concat(L.a["dropdown__list-icon"]," material-icons")},"delete"),o.a.createElement("span",{className:L.a["dropdown__list-label"]},"Delete"))))};var Y=function(e){var a=Object(n.useState)({toggled:!1}),t=Object(u.a)(a,2),l=t[0],r=t[1];function i(e,a){!0===l.toggled?r({toggled:!1}):e.nativeEvent.clientY+222>e.nativeEvent.view.window.innerHeight?e.nativeEvent.clientY>e.nativeEvent.view.window.innerHeight-10?r({toggled:!0,posX:e.nativeEvent.clientX-10,posY:e.nativeEvent.clientY-221,file:a}):r({toggled:!0,posX:e.nativeEvent.clientX-10,posY:e.nativeEvent.clientY-212,file:a}):r({toggled:!0,posX:e.nativeEvent.clientX-10,posY:e.nativeEvent.clientY-10,file:a})}return o.a.createElement("section",{className:R.a.content},e.currentFolder?o.a.createElement("table",{className:R.a.content__table},o.a.createElement("thead",null,o.a.createElement("tr",{className:R.a["content__table-row"]},o.a.createElement("th",{className:R.a["content__table-th"]}),o.a.createElement("th",{className:R.a["content__table-th"]}),o.a.createElement("th",{className:R.a["content__table-th"]},"File name"),o.a.createElement("th",{className:R.a["content__table-th"]},"Last modified"),o.a.createElement("th",{className:R.a["content__table-th"]},"Size"),o.a.createElement("th",{className:R.a["content__table-th"]}))),o.a.createElement("tbody",null,e.currentFolder.map(function(a){return o.a.createElement("tr",{className:R.a["content__table-row"],key:a.id},function(a){var t=!0,n=!1,l=void 0;try{for(var r,c=e.favorites[Symbol.iterator]();!(t=(r=c.next()).done);t=!0)if(r.value.id===a.id)return o.a.createElement("td",{className:R.a["content__table-td"]},o.a.createElement("i",{className:"".concat(R.a["content__star--active"]," material-icons"),onClick:function(){return e.removeFavorite(a)}},"star"))}catch(i){n=!0,l=i}finally{try{t||null==c.return||c.return()}finally{if(n)throw l}}return o.a.createElement("td",{className:R.a["content__table-td"]},o.a.createElement("i",{className:"".concat(R.a.content__star," material-icons"),onClick:function(){return e.addFavorite(a)}},"star"))}(a),o.a.createElement("td",{className:R.a["content__table-td"]},o.a.createElement(x,{file:a})),o.a.createElement("td",{className:R.a["content__table-td"]},"folder"===a[".tag"]?o.a.createElement(c.b,{className:R.a.content__link,to:"/home".concat(a.path_display)},a.name):o.a.createElement("span",{className:R.a.content__link,onClick:function(){return e.downloadFile(a)}},a.name)),o.a.createElement("td",{className:R.a["content__table-td"]},a.server_modified?(t=a.server_modified,M()(new Date).diff(t,"days")>2?M()(t).format("MMMM Do YYYY, h:mm"):M()(t).fromNow()):null),o.a.createElement("td",{className:R.a["content__table-td"]},function(e){if(e)return e<1e3?e+" bytes":e>=1e3&&e<1e6?(e/1e3).toFixed(2)+" kB":e>=1e6&&e<1e9?(e/1e6).toFixed(2)+" MB":(e/1e9).toFixed(2)+" GB"}(a.size)),o.a.createElement("td",{className:R.a["content__table-td"]},o.a.createElement("span",{onClick:function(e){return i(e,a)},className:"".concat(R.a["content__table-dropdown"]," material-icons")},"more_horiz")));var t}))):o.a.createElement("div",null,"Loading..."),o.a.createElement("table",{className:R.a.content__table},o.a.createElement("thead",null,o.a.createElement("tr",{className:R.a["content__table-row"]},e.favorites.length?o.a.createElement("th",{className:R.a["content__table-th"]}):null,e.favorites.length?o.a.createElement("th",{className:R.a["content__table-th"]}):null,o.a.createElement("th",{className:R.a["content__table-th"]},"Favorites"))),o.a.createElement("tbody",null,e.favorites.length?e.favorites.map(function(a){return o.a.createElement("tr",{className:R.a["content__table-row"],key:a.id},o.a.createElement("td",{className:R.a["content__fav-table-td"]},o.a.createElement("i",{className:"".concat(R.a["content__star--active"]," material-icons"),onClick:function(){return e.removeFavorite(a)}},"star")),o.a.createElement("td",{className:R.a["content__fav-table-td"]},o.a.createElement(x,{file:a})),o.a.createElement("td",{className:R.a["content__fav-table-td"]},"folder"===a[".tag"]?o.a.createElement(c.b,{className:R.a.content__link,to:"/home".concat(a.path_display)},a.name):o.a.createElement("span",{className:R.a.content__link,onClick:function(){return e.downloadFile(a)}},a.name)))}):o.a.createElement("tr",{className:R.a["content__table-row"]},o.a.createElement("td",{className:R.a["content__table-td"]},"No favorites found :(")))),l.toggled?o.a.createElement(U,{favorites:e.favorites,removeFavorite:e.removeFavorite,addFavorite:e.addFavorite,copyFile:e.copyFile,downloadFile:e.downloadFile,deleteFile:e.deleteFile,toggleDropdown:i,posX:l.posX,posY:l.posY,file:l.file,renameFileFunc:e.renameFileFunc,moveFileFunc:e.moveFileFunc}):null)},I=t(15),J=t.n(I),q=function(e){return o.a.createElement("nav",{className:J.a.nav},o.a.createElement("div",{className:J.a.nav__head},o.a.createElement("div",{className:J.a["nav__logo-user-wrapper"]},o.a.createElement("img",{className:J.a.nav__logo,src:s.a,alt:"Lockbox logotype"}),o.a.createElement("div",{className:J.a["nav__user-wrapper"]},o.a.createElement("h4",{className:J.a.nav__username},e.user.display_name),o.a.createElement("h5",{className:J.a.nav__email},e.user.email))),o.a.createElement("button",{className:J.a["nav__logout-btn"],onClick:e.signOut},"Sign out")),o.a.createElement("div",{className:J.a["nav__btns-container"]},o.a.createElement("ul",{className:J.a.nav__ul},o.a.createElement("li",null,o.a.createElement("button",{onClick:e.uploadFile},"Upload file")),o.a.createElement("li",null,o.a.createElement("button",{onClick:e.newFile},"New folder")))))},X=t(23),z=t.n(X),A=t(9),B=t.n(A),G=function(e){var a=Object(n.useState)(""),t=Object(u.a)(a,2),l=t[0],r=t[1];return o.a.createElement("div",{className:B.a.overlay},o.a.createElement("div",{className:B.a.Dialog},o.a.createElement("div",{className:B.a.Dialog__header},o.a.createElement("div",{className:B.a["Dialog__header-left"]},o.a.createElement("i",{className:"material-icons ".concat(B.a["Dialog__header-icon"])},"folder"),o.a.createElement("span",{className:B.a["Dialog__header-text"]},"Create New Folder")),o.a.createElement("div",{className:B.a["Dialog__header-right"]},o.a.createElement("i",{onClick:e.exitDialog,className:"material-icons ".concat(B.a["Dialog__header-close"])},"close"))),o.a.createElement("div",{className:B.a.Dialog__content},o.a.createElement("span",{className:B.a["Dialog__content-text"]},"Give this folder a name"),o.a.createElement("input",{onChange:function(e){r(e.target.value)},value:l,type:"text",className:B.a["Dialog__content-input"],placeholder:"Folder Name..."})),o.a.createElement("div",{className:B.a.Dialog__footer},o.a.createElement("button",{onClick:e.exitDialog,className:B.a["Dialog__footer-cancel"]},"Cancel"),o.a.createElement("button",{onClick:function(){new b.Dropbox({accessToken:g.value,fetch:fetch}).filesCreateFolderV2({path:e.currentPath+"/"+l}).then(function(){return e.exitDialog()})},className:B.a["Dialog__footer-create"]},"Create"))))},P=t(8),V=t.n(P),K=function(e){var a=Object(n.useState)({}),t=Object(u.a)(a,2),l=t[0],r=t[1],c=Object(n.useRef)(null);return o.a.createElement("div",{className:V.a["overlay-uploadfile"]},o.a.createElement("div",{className:V.a["overlay-uploadfile__container"]},o.a.createElement("i",{className:"material-icons ".concat(V.a["overlay-uploadfile__close-btn"]),onClick:e.closeClick},"close"),o.a.createElement("div",{className:V.a["overlay-uploadfile__header-wrapper"]},o.a.createElement("i",{className:"material-icons ".concat(V.a["overlay-uploadfile__header-icon"])},"insert_drive_file"),o.a.createElement("h4",{className:V.a["overlay-uploadfile__header-text"]},"Upload File")),o.a.createElement("form",{className:V.a["overlay-uploadfile__form"],onSubmit:function(a){a.preventDefault(),e.uploadFileRequest(l)}},o.a.createElement("span",{className:V.a["overlay-uploadfile__input-wrapper"]},o.a.createElement("input",{className:V.a["overlay-uploadfile__upload-input"],type:"file",onChange:function(e){r(e.target.files)},ref:c}),o.a.createElement("span",{className:V.a["overlay-uploadfile__fake-input"]},o.a.createElement("i",{className:"material-icons ".concat(V.a["overlay-uploadfile__fake-input-icon"])},"arrow_drop_up"),"Choose a file"),l.length?o.a.createElement("span",{className:V.a["overlay-uploadfile__filename"]},l[0].name):null),o.a.createElement("div",{className:V.a["overlay-uploadfile__btn-wrapper"]},o.a.createElement("button",{className:V.a["overlay-uploadfile__cancel-btn"],onClick:function(a){a.preventDefault(a),e.closeClick()}},"Cancel"),o.a.createElement("button",{className:V.a["overlay-uploadfile__submit-btn"],type:"submit"},"Upload")))))},Z=t(11),W=t.n(Z),Q=function(e){return o.a.createElement("div",{className:W.a["overlay-rename"]},o.a.createElement("div",{className:W.a["rename-container"]},o.a.createElement("i",{className:"material-icons ".concat(W.a["rename-container__close-btn"]),onClick:e.closeRenameFile},"close"),o.a.createElement("span",{className:W.a["rename-container__title-wrapper"]},o.a.createElement("i",{className:"material-icons ".concat(W.a["title-wrapper__icon"])},"create"),o.a.createElement("h4",{className:W.a["title-wrapper__title"]},"Rename File")),o.a.createElement("form",{className:W.a["rename-container__rename-form"],onSubmit:function(a){a.preventDefault(),e.renameFileRequest()}},o.a.createElement("input",{className:W.a["rename-form__input"],type:"text",value:e.fileData.fileName,onChange:e.onRenameFileChange}),o.a.createElement("span",{className:W.a["rename-form__btns-wrapper"]},o.a.createElement("button",{className:W.a["rename-form__cancel-btn"],onClick:e.closeRenameFile},"Cancel"),o.a.createElement("button",{className:W.a["rename-form__submit-btn"]},"Rename")))))},$=t(1),ee=t.n($);var ae=function(e){var a=Object(n.useState)([]),t=Object(u.a)(a,2),l=t[0],r=t[1],c=Object(n.useState)(""),i=Object(u.a)(c,2),_=i[0],s=i[1];function m(e){s(e.target.value)}return Object(n.useEffect)(function(){new b.Dropbox({accessToken:g.value,fetch:fetch}).filesListFolder({path:"",recursive:!0}).then(function(e){var a=e.entries.filter(function(e){return"folder"===e[".tag"]});r(a)})},[]),o.a.createElement("div",{className:ee.a["overlay-move"]},o.a.createElement("div",{className:ee.a["overlay-move__move-container"]},o.a.createElement("i",{className:"material-icons ".concat(ee.a["move-container__close-btn"]),onClick:e.closeMoveFile},"close"),o.a.createElement("span",{className:ee.a["move-container__title-wrapper"]},o.a.createElement("span",{className:"".concat(ee.a["move-container__icon"]," material-icons")},"exit_to_app"),o.a.createElement("h4",{className:ee.a["move-container__title"]},"Move File")),o.a.createElement("div",{className:ee.a["move-container__path-wrapper"]},o.a.createElement("label",{className:ee.a["path-wrapper__path-label"]},"From: ",o.a.createElement("span",{className:ee.a["path-wrapper__path-text"]},function(e){var a=e.split("/");return a.pop(),a.join(" > ")}("Home".concat(e.selectedFile.path_display)))),o.a.createElement("label",{className:ee.a["path-wrapper__path-label"]},"To: ",o.a.createElement("span",{className:ee.a["path-wrapper__path-text"]},function(e){if("/"===e)return"Home";if(!e)return"";var a=e.split("/").join(" > ");return a="Home "+a}("".concat(_))))),o.a.createElement("div",{className:ee.a["move-form__folder-container"]},o.a.createElement("div",{className:ee.a["move-form__folder-wrapper"]},o.a.createElement("input",{className:ee.a["move-form__folder-radio"],type:"radio",name:"folder",value:"/",onChange:m}),o.a.createElement("span",{className:ee.a["move-form__folder-checkmark"]},o.a.createElement("i",{className:"material-icons ".concat(ee.a["move-form__folder-icon"])},"folder"),"Home")),l.map(function(e){return o.a.createElement("div",{className:ee.a["move-form__folder-wrapper"],key:e.id},o.a.createElement("input",{className:ee.a["move-form__folder-radio"],type:"radio",name:"folder",value:e.path_lower,onChange:m}),o.a.createElement("span",{className:ee.a["move-form__folder-checkmark"]},o.a.createElement("i",{className:"material-icons ".concat(ee.a["move-form__folder-icon"])},"folder"),e.name))})),o.a.createElement("span",{className:ee.a["move-form__btns-wrapper"]},o.a.createElement("button",{className:ee.a["move-form__cancel-btn"],onClick:e.closeMoveFile},"Cancel"),o.a.createElement("button",{className:ee.a["move-form__submit-btn"],onClick:function(){return e.moveFileRequest(e.selectedFile,_)}},"Move file"))))},te=t(44),ne=t(16),oe=t.n(ne),le=function(e){return o.a.createElement("div",{className:oe.a["overlay-rename"]},o.a.createElement("div",{className:oe.a["delete-container"]},o.a.createElement("i",{className:"material-icons ".concat(oe.a["delete-container__close-btn"]),onClick:e.closeDialog},"close"),o.a.createElement("span",{className:oe.a["delete-container__title-wrapper"]},o.a.createElement("i",{className:"material-icons ".concat(oe.a["title-wrapper__icon"])},"delete"),o.a.createElement("h4",{className:oe.a["title-wrapper__title"]},"Are you sure you want to delete this file?")),o.a.createElement("span",{className:oe.a["delete-container__btns-wrapper"]},o.a.createElement("button",{className:oe.a["delete-container__cancel-btn"],onClick:e.closeDialog},"Cancel"),o.a.createElement("button",{className:oe.a["delete-container__submit-btn"],onClick:function(){return e.deleteFileRequest(e.file)}},"Delete"))))};var re,ce=function(e){var a=Object(n.useState)([]),t=Object(u.a)(a,2),l=t[0],r=t[1],c=Object(n.useState)(""),i=Object(u.a)(c,2),_=i[0],s=i[1];function m(e){s(e.target.value)}return Object(n.useEffect)(function(){new b.Dropbox({accessToken:g.value,fetch:fetch}).filesListFolder({path:"",recursive:!0}).then(function(e){var a=e.entries.filter(function(e){return"folder"===e[".tag"]});r(a)})},[]),o.a.createElement("div",{className:ee.a["overlay-move"]},o.a.createElement("div",{className:ee.a["overlay-move__move-container"]},o.a.createElement("i",{className:"material-icons ".concat(ee.a["move-container__close-btn"]),onClick:e.closeCopyFile},"close"),o.a.createElement("span",{className:ee.a["move-container__title-wrapper"]},o.a.createElement("span",{className:"".concat(ee.a["move-container__icon"]," material-icons")},"file_copy"),o.a.createElement("h4",{className:ee.a["move-container__title"]},"Copy File")),o.a.createElement("div",{className:ee.a["move-container__path-wrapper"]},o.a.createElement("label",{className:ee.a["path-wrapper__path-label"]},"From: ",o.a.createElement("span",{className:ee.a["path-wrapper__path-text"]},function(e){var a=e.split("/");return a.pop(),a.join(" > ")}("Home".concat(e.selectedFile.path_display)))),o.a.createElement("label",{className:ee.a["path-wrapper__path-label"]},"To: ",o.a.createElement("span",{className:ee.a["path-wrapper__path-text"]},function(e){if("/"===e)return"Home";if(!e)return"";var a=e.split("/").join(" > ");return a="Home "+a}("".concat(_))))),o.a.createElement("div",{className:ee.a["move-form__folder-container"]},o.a.createElement("div",{className:ee.a["move-form__folder-wrapper"]},o.a.createElement("input",{className:ee.a["move-form__folder-radio"],type:"radio",name:"folder",value:"/",onChange:m}),o.a.createElement("span",{className:ee.a["move-form__folder-checkmark"]},o.a.createElement("i",{className:"material-icons ".concat(ee.a["move-form__folder-icon"])},"folder"),"Home")),l.map(function(e){return o.a.createElement("div",{className:ee.a["move-form__folder-wrapper"],key:e.id},o.a.createElement("input",{className:ee.a["move-form__folder-radio"],type:"radio",name:"folder",value:e.path_lower,onChange:m}),o.a.createElement("span",{className:ee.a["move-form__folder-checkmark"]},o.a.createElement("i",{className:"material-icons ".concat(ee.a["move-form__folder-icon"])},"folder"),e.name))})),o.a.createElement("span",{className:ee.a["move-form__btns-wrapper"]},o.a.createElement("button",{className:ee.a["move-form__cancel-btn"],onClick:e.closeCopyFile},"Cancel"),o.a.createElement("button",{className:ee.a["move-form__submit-btn"],onClick:function(){return e.copyFileRequest(e.selectedFile,_)}},"Copy File"))))},ie=function(e){var a=e.location.pathname.substr(5),t=Object(n.useState)(!1),l=Object(u.a)(t,2),r=l[0],c=l[1],_=Object(n.useState)(!1),s=Object(u.a)(_,2),m=s[0],p=s[1],d=Object(n.useState)({}),v=Object(u.a)(d,2),N=v[0],w=v[1],F=Object(n.useState)(!1),y=Object(u.a)(F,2),k=y[0],D=y[1],x=Object(n.useState)({}),O=Object(u.a)(x,2),j=O[0],S=O[1],R=Object(n.useState)(!1),H=Object(u.a)(R,2),M=H[0],T=H[1],L=Object(n.useState)([]),U=Object(u.a)(L,2),I=U[0],J=U[1],X=Object(n.useState)([]),A=Object(u.a)(X,2),B=A[0],P=A[1],V=Object(n.useState)(!1),Z=Object(u.a)(V,2),W=Z[0],$=Z[1],ee=Object(n.useState)(!1),ne=Object(u.a)(ee,2),oe=ne[0],ie=ne[1],_e=Object(n.useState)({}),se=Object(u.a)(_e,2),me=se[0],pe=se[1],de=Object(n.useState)(""),fe=Object(u.a)(de,2),ue=fe[0],ve=fe[1],he=Object(te.useDebounce)(ue,500),be=Object(u.a)(he,1)[0],ge=Object(n.useState)(!1),Ee=Object(u.a)(ge,2),Ne=Ee[0],we=Ee[1],Fe=Object(n.useState)({}),ye=Object(u.a)(Fe,2),ke=ye[0],De=ye[1],xe=Object(n.useState)(!1),Oe=Object(u.a)(xe,2),je=Oe[0],Ce=Oe[1],Se=Object(n.useState)({}),Re=Object(u.a)(Se,2),He=Re[0],Me=Re[1],Te=Object(n.useState)([]),Le=Object(u.a)(Te,2),Ue=Le[0],Ye=Le[1];function Ie(){clearTimeout(re),re=setTimeout(function(){new b.Dropbox({accessToken:g.value,fetch:fetch}).filesListFolder({path:a}).then(function(e){J(e.entries),Ie()})},5e3)}function Je(e){var a=JSON.parse(localStorage.getItem("lockbox_favorites"));if(a){var t=a.filter(function(a){return e.id!==a.id});Ye(t),localStorage.setItem("lockbox_favorites",JSON.stringify(t))}}function qe(e){var a=JSON.parse(localStorage.getItem("lockbox_favorites"));if(a){var t=a.map(function(a){return e.id===a.id?e:a});Ye(t),localStorage.setItem("lockbox_favorites",JSON.stringify(t))}}return Object(n.useEffect)(function(){var e=window.location.search.replace("?code=",""),a="https://api.dropboxapi.com/oauth2/token?code=".concat(e,"&grant_type=authorization_code&redirect_uri=https://ultraemme.github.io/mandatory-advanced-js5&client_id=h7s722dkxc8lgct&client_secret=u81zydr2i3rbxth");g.value?ie(!0):h.a.post(a).then(function(e){E(e.data.access_token),ie(!0)}).catch(function(e){console.log(e.response.data),$(!0)})},[]),Object(n.useEffect)(function(){if(oe){var e=new b.Dropbox({accessToken:g.value,fetch:fetch});e.usersGetCurrentAccount().then(function(e){var a={display_name:e.name.display_name,email:e.email};pe(a)}),e.filesListFolder({path:a}).then(function(e){J(e.entries),localStorage.getItem("lockbox_favorites")&&Ye(JSON.parse(localStorage.getItem("lockbox_favorites"))),Ie()})}},[oe]),Object(n.useEffect)(function(){return function(){clearTimeout(re)}},[]),Object(n.useEffect)(function(){oe&&(Ie(),new b.Dropbox({accessToken:g.value,fetch:fetch}).filesListFolder({path:a}).then(function(e){J(e.entries)}).catch(function(e){console.error(e.response)}))},[a,M]),Object(n.useEffect)(function(){oe&&new b.Dropbox({accessToken:g.value,fetch:fetch}).filesSearch({path:"",query:ue}).then(function(e){var a=e.matches.map(function(e){return e.metadata});P(a)})},[be]),o.a.createElement(o.a.Fragment,null,W?o.a.createElement(i.a,{to:"/"}):o.a.createElement("div",{className:z.a.home},o.a.createElement("div",{className:z.a["home__left-container"]},o.a.createElement(q,{newFile:function(){return T(!0)},uploadFile:function(){return c(!0)},signOut:function(){localStorage.removeItem("lockbox_favorites"),$(!0),E(null)},user:me})),o.a.createElement("div",{className:z.a["home__right-container"]},o.a.createElement(C,{history:e.history,searchlist:B,currentPath:e.location,searchFile:function(e){ve(""===e?"":e.target.value)},value:ue}),o.a.createElement(Y,{favorites:Ue,removeFavorite:function(e){var a=Ue.filter(function(a){return a.id!==e.id});Ye(a),localStorage.setItem("lockbox_favorites",JSON.stringify(a))},addFavorite:function(e){var a=Object(f.a)(Ue);a.push(e),Ye(a),localStorage.setItem("lockbox_favorites",JSON.stringify(a))},deleteFile:function(e){we(!0),De(e)},copyFile:function(e){Me(e),Ce(!0)},currentFolder:I,currentPath:a,downloadFile:function(e){"folder"===e[".tag"]?new b.Dropbox({accessToken:g.value,fetch:fetch}).filesDownloadZip({path:e.path_lower}).then(function(e){var a=URL.createObjectURL(e.fileBlob),t=document.createElement("a");t.setAttribute("href",a),t.setAttribute("download",e.name),t.click()}).catch(function(e){console.log(e.response)}):new b.Dropbox({accessToken:g.value,fetch:fetch}).filesDownload({path:e.path_lower}).then(function(e){var a=URL.createObjectURL(e.fileBlob),t=document.createElement("a");t.setAttribute("href",a),t.setAttribute("download",e.name),t.click()}).catch(function(a){Je(e),console.log(a.response)})},renameFileFunc:function(e){var a={fileName:e.name,path:e.path_display};w(a),p(!0)},moveFileFunc:function(e){S(e),D(!0)}}))),k?o.a.createElement(ae,{closeMoveFile:function(){return D(!1)},moveFileRequest:function(e,t){if("/"===t)t="";else if(!t)return;new b.Dropbox({accessToken:g.value,fetch:fetch}).filesMoveV2({from_path:e.path_lower,to_path:"".concat(t,"/").concat(e.name)}).then(function(e){var t=e.metadata;new b.Dropbox({accessToken:g.value,fetch:fetch}).filesListFolder({path:a}).then(function(e){qe(t),J(e.entries),D(!1)})}).catch(function(e){console.log(e),D(!1)})},selectedFile:j}):null,je?o.a.createElement(ce,{closeCopyFile:function(){return Ce(!1)},copyFileRequest:function(e,t){t="/"===t?"":t,new b.Dropbox({accessToken:g.value,fetch:fetch}).filesCopyV2({from_path:e.path_lower,to_path:"".concat(t,"/").concat(e.name),autorename:!0}).then(function(e){new b.Dropbox({accessToken:g.value,fetch:fetch}).filesListFolder({path:a}).then(function(e){J(e.entries),Ce(!1)}).catch(function(e){console.error(e)})}).catch(function(e){console.error(e)})},selectedFile:He}):null,m?o.a.createElement(Q,{fileData:N,onRenameFileChange:function(e){var a=JSON.parse(JSON.stringify(N));a.fileName=e.target.value,w(a)},renameFileRequest:function(){var e=JSON.parse(JSON.stringify(N)),t=e.path;(t=t.split("/"))[t.length-1]=e.fileName,t=t.join("/"),new b.Dropbox({accessToken:g.value,fetch:fetch}).filesMoveV2({from_path:e.path,to_path:t}).then(function(e){var t=e.metadata;new b.Dropbox({accessToken:g.value,fetch:fetch}).filesListFolder({path:a}).then(function(e){qe(t),J(e.entries),p(!1)})})},closeRenameFile:function(){return p(!1)}}):null,r?o.a.createElement(K,{closeClick:function(){return c(!1)},uploadFileRequest:function(e){!e.length||e.length>1||(e[0].size<15e7?new b.Dropbox({accessToken:g.value,fetch:fetch}).filesUpload({contents:e[0],path:"".concat(a,"/").concat(e[0].name),mode:"add",autorename:!0,mute:!1,strict_conflict:!1}).then(function(e){new b.Dropbox({accessToken:g.value,fetch:fetch}).filesListFolder({path:a}).then(function(e){J(e.entries),c(!1)})}):new b.Dropbox({accessToken:g.value,fetch:fetch}).filesUploadSessionStart({contents:e[0],close:!1}).then(function(t){new b.Dropbox({accessToken:g.value,fetch:fetch}).filesUploadSessionFinish({cursor:{session_id:t.session_id,offset:e[0].size},commit:{path:"".concat(a,"/").concat(e[0].name),mode:"add",autorename:!0,mute:!1,strict_conflict:!1}}).then(function(e){new b.Dropbox({accessToken:g.value,fetch:fetch}).filesListFolder({path:a}).then(function(e){J(e.entries),c(!1)})})}))}}):null,!0===M?o.a.createElement(G,{currentPath:a,exitDialog:function(){return T(!1)}}):null,Ne?o.a.createElement(le,{file:ke,deleteFileRequest:function(e){new b.Dropbox({accessToken:g.value,fetch:fetch}).filesDeleteV2({path:e.path_lower}).then(function(a){Je(a.metadata);var t=I.filter(function(a){return e!==a});we(!1),J(t)}).catch(function(e){console.error(e)})},closeDialog:function(){return we(!1)}}):null)};var _e=function(){return o.a.createElement(c.a,{basename:"/mandatory-advanced-js5"},o.a.createElement("div",null,o.a.createElement(i.b,{exact:!0,path:"/",component:d}),o.a.createElement(i.b,{path:"/home",component:ie})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,a,t){e.exports={overlay:"Dialog_overlay__14uGF",Dialog:"Dialog_Dialog__1_qKg",Dialog__header:"Dialog_Dialog__header__2euaA","Dialog__header-left":"Dialog_Dialog__header-left__UtTDn","Dialog__header-right":"Dialog_Dialog__header-right__28emy","Dialog__header-icon":"Dialog_Dialog__header-icon__GXRrj","Dialog__header-text":"Dialog_Dialog__header-text__1nmvc","Dialog__header-close":"Dialog_Dialog__header-close__1_TqG",Dialog__content:"Dialog_Dialog__content__2hA91","Dialog__content-text":"Dialog_Dialog__content-text__3xeCF","Dialog__content-input":"Dialog_Dialog__content-input__23AaZ",Dialog__footer:"Dialog_Dialog__footer__1I1O5","Dialog__footer-create":"Dialog_Dialog__footer-create__H9vJo","Dialog__footer-cancel":"Dialog_Dialog__footer-cancel__3J9VU"}}},[[46,1,2]]]);
//# sourceMappingURL=main.01cc806e.chunk.js.map